'use strict';

var assert     = require('chai').assert;
var mockery    = require('mockery');

describe('user/factory', function () {

	// Module

	var factory = null;

	// Mocks

	var builderMock = {
		NewBuilder : function () {
			return { test : 'mock builder' };
		}
	};

	// Setup

	before(function () {
		mockery.enable({ useCleanCache: true });
		mockery.registerMock('AGL/builder', builderMock);
		mockery.registerAllowable('AGL/user/factory');
		factory = require('AGL/user/factory');
	});

	// Teardown

	after(function () {
		mockery.deregisterAll();
		mockery.resetCache();
		mockery.disable();
	});

	describe('BuildUser()', function () {

		it('should return a builder object', function () {
			assert.deepEqual(
				factory.BuildUser(),
				{ test : 'mock builder' },
				'expected to return a builder object'
			);
		});

	});

});
